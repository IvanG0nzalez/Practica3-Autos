(()=>{var e={};e.id=973,e.ids=[973],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var n=r(482),a=r(9108),s=r(2563),o=r.n(s),i=r(8300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["ventas",{children:["nuevo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9053)),"/home/ivan/WorkSpace/Practica3/front-end/venta-autos/app/ventas/nuevo/page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3384)),"/home/ivan/WorkSpace/Practica3/front-end/venta-autos/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ivan/WorkSpace/Practica3/front-end/venta-autos/app/ventas/nuevo/page.jsx"],u="/ventas/nuevo/page",h={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/ventas/nuevo/page",pathname:"/ventas/nuevo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7996:()=>{},9700:(e,t,r)=>{Promise.resolve().then(r.bind(r,6734))},2234:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},6734:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var n=r(2295),a=r(4502),s=r(3729),o=r(708),i=r(6040),l=r(2254),c=r(5428),d=r(2065),u=r(783),h=r.n(u),m=r(2899),p=r(7199),x=r(2148);function v(){let e=(0,c.fK)(),t=(0,c.LP)(),r=(0,l.useRouter)(),u=(0,c.U2)("rol"),v=a.Ry().shape({numero:a.Rx().required("Ingrese el n\xfamero de la venta")}),f={resolver:(0,i.X)(v)},{register:j,handleSubmit:b,formState:g,setValue:y,watch:P}=(0,o.cI)(f),{errors:k}=g,[N,Z]=(0,s.useState)([]),[w,C]=(0,s.useState)([]),[S,_]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,x.ZH)("admin/compradores",t),r=await (0,x.ZH)("admin/autosDisponibles",t);Z(e.datos),C(r.datos)}catch(e){console.error("Error obteniendo informaci\xf3n de compradores o autos",e)}})()},[t]);let A=e=>{S.some(t=>t.external_id===e.external_id)||(_([...S,e]),y("auto",null))},V=e=>{let t=[...S];t.splice(e,1),_(t)};return(0,n.jsxs)("div",{className:"row",children:["gerente"===u?n.jsx(m.Z,{}):n.jsx(p.Z,{}),n.jsx("h1",{children:"Registrar Venta"}),n.jsx("div",{className:"col-4 container-fluid",children:(0,n.jsxs)("form",{onSubmit:b(n=>{console.log("data",n);var a={numero:n.numero,empleado:e,comprador:n.comprador,autos:S.map(e=>e.external_id)};console.log("dato",a),(0,x.lf)("admin/venta/guardar",a,t).then(e=>{console.log("info",e),200===e.code?((0,d.Z)("Venta registrada correctamente","OK","sucess"),r.push("/ventas/propias")):(0,d.Z)("Error al agregar la venta!","Error","error")})}),children:[(0,n.jsxs)("div",{className:"form-outline form-white mb-4",children:[n.jsx("label",{className:"form-label",children:"N\xfamero"}),n.jsx("input",{...j("numero"),name:"numero",id:"numero",className:`form-control ${k.numero?"is-invalid":""}`}),n.jsx("div",{className:"alert alert-danger invalid-feedback",children:k.numero?.message})]}),(0,n.jsxs)("div",{className:"form-outline form-white mb-4",children:[n.jsx("label",{className:"form-label",children:"Comprador"}),(0,n.jsxs)("select",{...j("comprador"),className:`form-select ${k.comprador?"is-invalid":""}`,children:[n.jsx("option",{value:"",children:"Seleccionar Comprador"}),N.map((e,t)=>n.jsx("option",{value:e.external_id,children:e.nombres+" "+e.apellidos+" - "+e.cedula},t))]}),n.jsx("div",{className:"alert alert-danger invalid-feedback",children:k.comprador?.message})]}),(0,n.jsxs)("div",{className:"form-outline form-white mb-4",children:[n.jsx("label",{children:"Autos Disponibles:"}),(0,n.jsxs)("select",{...j("auto"),className:`form-select ${k.auto?"is-invalid":""}`,children:[n.jsx("option",{value:"",children:"Seleccionar Auto"}),w.map(e=>(0,n.jsxs)("option",{value:e.external_id,children:[e.marca," ",e.modelo," - ",e.color," (",e.anio,")"]},e.external_id))]}),n.jsx("div",{className:"alert alert-danger invalid-feedback",children:k.auto?.message}),n.jsx("button",{type:"button",onClick:()=>A(w.find(e=>e.external_id===P("auto"))),className:"btn btn-outline-dark btn-sm d-block mx-auto mt-3 px-5",children:"Agregar Auto"})]}),(0,n.jsxs)("div",{className:"form-outline form-white mb-4",children:[n.jsx("label",{children:"Autos Seleccionados:"}),(0,n.jsxs)("table",{className:"table",children:[n.jsx("thead",{children:(0,n.jsxs)("tr",{children:[n.jsx("th",{children:"Marca"}),n.jsx("th",{children:"Modelo"}),n.jsx("th",{children:"A\xf1o"}),n.jsx("th",{children:"Color"}),n.jsx("th",{children:"Precio"}),n.jsx("th",{children:"Acciones"})]})}),n.jsx("tbody",{children:S.map((e,t)=>(0,n.jsxs)("tr",{children:[n.jsx("td",{children:e.marca}),n.jsx("td",{children:e.modelo}),n.jsx("td",{children:e.anio}),n.jsx("td",{children:e.color}),n.jsx("td",{children:e.precio}),n.jsx("td",{children:n.jsx("button",{type:"button",onClick:()=>V(t),children:"Eliminar"})})]},e.external_id))})]})]}),(0,n.jsxs)("div",{className:"d-flex gap-4",children:[n.jsx("button",{type:"submit",className:"btn btn-outline-dark btn-lg px-5",id:"boton-nuevo-auto",children:"Agregar"}),n.jsx(h(),{href:"/ventas/propias",children:n.jsx("button",{className:"btn btn-outline-dark btn-lg px-5",children:"Cancelar"})})]})]})})]})}},2065:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(3963),a=r.n(n);let s=(e,t,r="success")=>a()(t,e,r,{button:"ACEPTAR",closeOnEsc:!0,closeOnClickOutside:!0,timer:3e3})},2899:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(2295),a=r(5428);r(783);var s=r(2065),o=r(2254),i=r(633),l=r(5964),c=r(8522);function d(){let e=(0,o.useRouter)(),t=async()=>{await (0,a.jH)(),(0,s.Z)("Adi\xf3s!","Hasta la pr\xf3xima"),e.push("/"),e.refresh()};return n.jsx(i.Z,{bg:"dark",expand:"lg",variant:"dark",children:(0,n.jsxs)("div",{className:"container-fluid",children:[n.jsx(i.Z.Toggle,{"aria-controls":"navbarSupportedContent"}),n.jsx(i.Z.Collapse,{id:"navbarSupportedContent",children:(0,n.jsxs)(l.Z,{className:"me-auto",children:[n.jsx(l.Z.Link,{onClick:t,children:"Cerrar Sesi\xf3n"}),(0,n.jsxs)(c.Z,{title:"Ventas",id:"basic-nav-dropdown",children:[n.jsx(c.Z.Item,{href:"/ventas",children:"Ventas"}),n.jsx(c.Z.Item,{href:"/ventas/propias",children:"Mis Ventas"})]}),(0,n.jsxs)(c.Z,{title:"Autos",id:"basic-nav-dropdown",children:[n.jsx(c.Z.Item,{href:"/autos",children:"Autos"}),n.jsx(c.Z.Item,{href:"/autos/vendidos",children:"Autos Vendidos"}),n.jsx(c.Z.Item,{href:"/autos/disponibles",children:"Autos Disponibles"})]}),n.jsx(l.Z.Link,{href:"/compradores",children:"Compradores"})]})})]})})}},7199:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(2295),a=r(5428);r(783);var s=r(2065),o=r(2254),i=r(633),l=r(5964),c=r(8522);function d(){let e=(0,o.useRouter)(),t=async()=>{await (0,a.jH)(),(0,s.Z)("Adi\xf3s!","Hasta la pr\xf3xima"),e.push("/"),e.refresh()};return n.jsx(i.Z,{bg:"dark",expand:"lg",variant:"dark",children:(0,n.jsxs)("div",{className:"container-fluid",children:[n.jsx(i.Z.Toggle,{"aria-controls":"navbarSupportedContent"}),n.jsx(i.Z.Collapse,{id:"navbarSupportedContent",children:(0,n.jsxs)(l.Z,{className:"me-auto",children:[n.jsx(l.Z.Link,{onClick:t,children:"Cerrar Sesi\xf3n"}),(0,n.jsxs)(c.Z,{title:"Ventas",id:"basic-nav-dropdown",children:[n.jsx(c.Z.Item,{href:"/ventas",children:"Ventas"}),n.jsx(c.Z.Item,{href:"/ventas/propias",children:"Mis Ventas"})]}),n.jsx(l.Z.Link,{href:"/compradores",children:"Compradores"})]})})]})})}},2148:(e,t,r)=>{"use strict";r.d(t,{Lw:()=>c,MX:()=>o,ZH:()=>s,lf:()=>i,m3:()=>a,xC:()=>l});let n="https://back-end-autos.onrender.com/api/";async function a(e,t){let r=[];r={"Content-Type":"application/json"};let a=await fetch(n+e,{method:"POST",headers:r,body:JSON.stringify(t)});return await a.json()}async function s(e,t){let r=await fetch(n+e,{method:"GET",headers:{"Content-type":"application/json",token:t},cache:"no-store"});return await r.json()}async function o(e,t,r){let a=await fetch(n+e+r,{method:"GET",headers:{"Content-type":"application/json",token:t},cache:"no-store"});return await a.json()}async function i(e,t,r){let a=await fetch(n+e,{method:"POST",headers:{"Content-type":"application/json",token:r},body:JSON.stringify(t)});return await a.json()}async function l(e,t,r){let a=await fetch(n+e,{method:"POST",headers:{token:r},body:t});return await a.json()}async function c(e,t,r){let a=await fetch(n+e,{method:"PATCH",headers:{"Content-type":"application/json",token:r},body:JSON.stringify(t)});return await a.json()}},5428:(e,t,r)=>{"use strict";r.d(t,{Fr:()=>s,LP:()=>o,U2:()=>a,a1:()=>n,fK:()=>i,jH:()=>l,pR:()=>c});let n=(e,t)=>{},a=e=>{},s=e=>{},o=()=>{},i=()=>{},l=()=>{},c=()=>{}},3384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(5036),a=r(4932),s=r.n(a);function o({children:e}){return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsxs)("head",{children:[n.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),n.jsx("title",{children:"Autos"}),n.jsx("script",{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js",async:!0})]}),n.jsx("body",{className:s().className,children:n.jsx("div",{className:"container-fluid",children:n.jsx("section",{children:e})})})]})}r(7272),r(8399)},9053:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>a,default:()=>o});let n=(0,r(6843).createProxy)(String.raw`/home/ivan/WorkSpace/Practica3/front-end/venta-autos/app/ventas/nuevo/page.jsx`),{__esModule:a,$$typeof:s}=n,o=n.default},7272:()=>{},6040:(e,t,r)=>{"use strict";r.d(t,{X:()=>c});var n=r(708),a=function(e,t,r){if(e&&"reportValidity"in e){var a=(0,n.U2)(r,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},s=function(e,t){var r=function(r){var n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?a(n.ref,r,e):n.refs&&n.refs.forEach(function(t){return a(t,r,e)})};for(var n in t.fields)r(n)},o=function(e,t){t.shouldUseNativeValidation&&s(e,t);var r={};for(var a in e){var o=(0,n.U2)(t.fields,a),c=Object.assign(e[a]||{},{ref:o&&o.ref});if(l(t.names||Object.keys(e),a)){var d=Object.assign({},i((0,n.U2)(r,a)));(0,n.t8)(d,"root",c),(0,n.t8)(r,a,d)}else(0,n.t8)(r,a,c)}return r},i=function(e){return Array.isArray(e)?e.filter(Boolean):[]},l=function(e,t){return e.some(function(e){return e.startsWith(t+".")})};function c(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),function(a,i,l){try{return Promise.resolve(function(n,o){try{var c=(t.context,Promise.resolve(e["sync"===r.mode?"validateSync":"validate"](a,Object.assign({abortEarly:!1},t,{context:i}))).then(function(e){return l.shouldUseNativeValidation&&s({},l),{values:r.raw?a:e,errors:{}}}))}catch(e){return o(e)}return c&&c.then?c.then(void 0,o):c}(0,function(e){var t;if(!e.inner)throw e;return{values:{},errors:o((t=!l.shouldUseNativeValidation&&"all"===l.criteriaMode,(e.inner||[]).reduce(function(e,r){if(e[r.path]||(e[r.path]={message:r.message,type:r.type}),t){var a=e[r.path].types,s=a&&a[r.type];e[r.path]=(0,n.KN)(r.path,t,e,r.type,s?[].concat(s,r.message):r.message)}return e},{})),l)}}))}catch(e){return Promise.reject(e)}}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[786,730,950,412],()=>r(4802));module.exports=n})();