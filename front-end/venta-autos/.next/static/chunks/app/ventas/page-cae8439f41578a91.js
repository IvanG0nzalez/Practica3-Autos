(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{4237:function(e,t,n){Promise.resolve().then(n.bind(n,5955))},5955:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(7437),r=n(6468),a=n(4174),o=n(2265),i=n(3369),c=n(8170),l=()=>{let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[a,l]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),[m,x]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=async()=>{try{let e=(0,i.LP)(),n=await (0,c.ZH)("/admin/ventas",e);console.log("en listaVentas",n),t(n.datos)}catch(e){console.error("Error obteniendo las ventas",e)}};(async()=>{try{let e=(0,i.LP)(),t=await (0,c.ZH)("/admin/empleados",e);console.log("response empleados",t),r(t.datos)}catch(e){console.error("Error obteniendo los empleados",e)}})(),e()},[]);let j=async()=>{try{let e=(0,i.LP)(),n="/admin/ventas";a?(n+="/obtener/e/".concat(a),d&&h&&(n+="/".concat(d,"/").concat(h))):d&&h&&(n+="/obtener/".concat(d,"/").concat(h));let s=await (0,c.ZH)(n,e);t(s.datos),x(!0)}catch(e){console.error("Error obteniendo las ventas",e)}};return(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsxs)("div",{className:"mb-3 d-flex",children:[(0,s.jsxs)("select",{className:"form-select me-2",style:{width:"225px"},value:a,onChange:e=>l(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Todos los empleados"}),n.map(e=>(0,s.jsx)("option",{value:e.external_id,children:e.nombres+" "+e.apellidos},e.external_id))]}),(0,s.jsx)("input",{type:"text",placeholder:"A\xf1o",className:"form-control me-2",style:{width:"100px"},value:d,onChange:e=>u(e.target.value)}),(0,s.jsx)("input",{type:"text",placeholder:"Mes",className:"form-control me-2",style:{width:"100px"},value:h,onChange:e=>p(e.target.value)}),(0,s.jsx)("button",{onClick:j,className:"btn btn-outline-dark btn-sm",children:"Filtrar"})]}),(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"N\xfamero"}),(0,s.jsx)("th",{scope:"col",children:"Comprador"}),(0,s.jsx)("th",{scope:"col",children:"Empleado"}),(0,s.jsx)("th",{scope:"col",children:"Recargo"}),(0,s.jsx)("th",{scope:"col",children:"Total"})]})}),(0,s.jsx)("tbody",{children:m?e.length>0?e.map((e,t)=>{var n;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.numero}),(0,s.jsx)("td",{children:e.comprador.nombres+" "+e.comprador.apellidos}),(0,s.jsx)("td",{children:e.empleado.nombres+" "+e.empleado.apellidos}),(0,s.jsx)("td",{children:e.recargo}),(0,s.jsx)("td",{children:e.total})]},e.external_id)}):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"5",className:"text-center",children:"No se encontraron ventas en la fecha ingresada"})}):e.map((e,t)=>{var n;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.numero}),(0,s.jsx)("td",{children:e.comprador.nombres+" "+e.comprador.apellidos}),(0,s.jsx)("td",{children:e.empleado.nombres+" "+e.empleado.apellidos}),(0,s.jsx)("td",{children:e.recargo}),(0,s.jsx)("td",{children:e.total})]},e.external_id)})})]})]})};function d(){let e=(0,i.U2)("rol");return(0,s.jsxs)("div",{className:"row",children:["gerente"===e?(0,s.jsx)(r.Z,{}):(0,s.jsx)(a.Z,{}),(0,s.jsx)("div",{className:"mb-2 mt-4",children:(0,s.jsx)("div",{className:"d-flex gap-4",children:(0,s.jsx)("h2",{children:"Listado de Todas las Ventas"})})}),(0,s.jsx)(l,{})]})}n(1396)},5944:function(e,t,n){"use strict";var s=n(5003),r=n.n(s);t.Z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";return r()(t,e,n,{button:"ACEPTAR",closeOnEsc:!0,closeOnClickOutside:!0,timer:3e3})}},6468:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(7437),r=n(3369);n(1396);var a=n(5944),o=n(4033),i=n(2580),c=n(7380),l=n(8776);function d(){let e=(0,o.useRouter)(),t=async()=>{await (0,r.jH)(),(0,a.Z)("Adi\xf3s!","Hasta la pr\xf3xima"),e.push("/"),e.refresh()};return(0,s.jsx)(i.Z,{bg:"dark",expand:"lg",variant:"dark",children:(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsx)(i.Z.Toggle,{"aria-controls":"navbarSupportedContent"}),(0,s.jsx)(i.Z.Collapse,{id:"navbarSupportedContent",children:(0,s.jsxs)(c.Z,{className:"me-auto",children:[(0,s.jsx)(c.Z.Link,{onClick:t,children:"Cerrar Sesi\xf3n"}),(0,s.jsxs)(l.Z,{title:"Ventas",id:"basic-nav-dropdown",children:[(0,s.jsx)(l.Z.Item,{href:"/ventas",children:"Ventas"}),(0,s.jsx)(l.Z.Item,{href:"/ventas/propias",children:"Mis Ventas"})]}),(0,s.jsxs)(l.Z,{title:"Autos",id:"basic-nav-dropdown",children:[(0,s.jsx)(l.Z.Item,{href:"/autos",children:"Autos"}),(0,s.jsx)(l.Z.Item,{href:"/autos/vendidos",children:"Autos Vendidos"}),(0,s.jsx)(l.Z.Item,{href:"/autos/disponibles",children:"Autos Disponibles"})]}),(0,s.jsx)(c.Z.Link,{href:"/compradores",children:"Compradores"})]})})]})})}},4174:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(7437),r=n(3369);n(1396);var a=n(5944),o=n(4033),i=n(2580),c=n(7380),l=n(8776);function d(){let e=(0,o.useRouter)(),t=async()=>{await (0,r.jH)(),(0,a.Z)("Adi\xf3s!","Hasta la pr\xf3xima"),e.push("/"),e.refresh()};return(0,s.jsx)(i.Z,{bg:"dark",expand:"lg",variant:"dark",children:(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsx)(i.Z.Toggle,{"aria-controls":"navbarSupportedContent"}),(0,s.jsx)(i.Z.Collapse,{id:"navbarSupportedContent",children:(0,s.jsxs)(c.Z,{className:"me-auto",children:[(0,s.jsx)(c.Z.Link,{onClick:t,children:"Cerrar Sesi\xf3n"}),(0,s.jsxs)(l.Z,{title:"Ventas",id:"basic-nav-dropdown",children:[(0,s.jsx)(l.Z.Item,{href:"/ventas",children:"Ventas"}),(0,s.jsx)(l.Z.Item,{href:"/ventas/propias",children:"Mis Ventas"})]}),(0,s.jsx)(c.Z.Link,{href:"/compradores",children:"Compradores"})]})})]})})}},8170:function(e,t,n){"use strict";n.d(t,{Lw:function(){return l},MX:function(){return o},ZH:function(){return a},lf:function(){return i},m3:function(){return r},xC:function(){return c}});let s="https://back-end-autos.onrender.com/api/";async function r(e,t){let n=[];n={"Content-Type":"application/json"};let r=await fetch(s+e,{method:"POST",headers:n,body:JSON.stringify(t)});return await r.json()}async function a(e,t){let n=await fetch(s+e,{method:"GET",headers:{"Content-type":"application/json",token:t},cache:"no-store"});return await n.json()}async function o(e,t,n){let r=await fetch(s+e+n,{method:"GET",headers:{"Content-type":"application/json",token:t},cache:"no-store"});return await r.json()}async function i(e,t,n){let r=await fetch(s+e,{method:"POST",headers:{"Content-type":"application/json",token:n},body:JSON.stringify(t)});return await r.json()}async function c(e,t,n){let r=await fetch(s+e,{method:"POST",headers:{token:n},body:t});return await r.json()}async function l(e,t,n){let r=await fetch(s+e,{method:"PATCH",headers:{"Content-type":"application/json",token:n},body:JSON.stringify(t)});return await r.json()}},3369:function(e,t,n){"use strict";n.d(t,{Fr:function(){return a},LP:function(){return o},U2:function(){return r},a1:function(){return s},fK:function(){return i},jH:function(){return c},pR:function(){return l}});let s=(e,t)=>{sessionStorage.setItem(e,t)},r=e=>sessionStorage.getItem(e),a=e=>{sessionStorage.setItem("token",e)},o=()=>sessionStorage.getItem("token"),i=()=>sessionStorage.getItem("external_id"),c=()=>{sessionStorage.clear()},l=()=>{var e=sessionStorage.getItem("token");return e&&("undefined"!==e||null!==e||"null"!==e)}}},function(e){e.O(0,[595,664,971,938,744],function(){return e(e.s=4237)}),_N_E=e.O()}]);