(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[902],{8220:function(e,n,t){Promise.resolve().then(t.bind(t,6568))},6568:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var r=t(7437),a=t(5691),s=t(1865),i=t(9701),o=t(4033),c=t(3369),l=t(5944),u=t(1396),d=t.n(u),f=t(6468),h=t(4174),m=t(8170);function p(e){var n;let{params:t}=e,u=t.external;(0,c.fK)();let p=(0,c.LP)(),v=(0,c.U2)("rol"),x=(0,o.useRouter)(),j=a.Ry().shape({external:a.Z_().required("Ingrese un identificador \xfanico para la(s) imagen(es)")}),g={resolver:(0,i.X)(j)},{register:b,handleSubmit:y,formState:Z,setValue:k}=(0,s.cI)(g),{errors:w}=Z,C=async e=>{try{let n=new FormData;n.append("auto",u),n.append("external",e.external);for(let t=0;t<e.files.length;t++)n.append("file",e.files[t]);console.log("data",n);let t=await (0,m.xC)("admin/autos/file/guardar",n,p);console.log("response",t),(0,l.Z)("Imagen(es) guardada(s) correctamente","OK","success"),x.push("/autos/disponibles")}catch(e){console.error("Error al enviar la(s) imagen(es)",e),(0,l.Z)("Error al enviar la(s) imagen(es)","Error","error")}};return(0,r.jsxs)("div",{className:"row",children:["gerente"===v?(0,r.jsx)(f.Z,{}):(0,r.jsx)(h.Z,{}),(0,r.jsx)("h1",{children:"Registrar Imagen"}),(0,r.jsx)("div",{className:"col-4 container-fluid",children:(0,r.jsxs)("form",{onSubmit:y(C),encType:"multipart/form-data",children:[(0,r.jsxs)("div",{className:"form-outline form-white mb-4",children:[(0,r.jsx)("label",{className:"form-label",children:"Nombre \xfanico"}),(0,r.jsx)("input",{...b("external"),name:"external",id:"external",className:"form-control ".concat(w.external?"is-invalid":"")}),(0,r.jsx)("div",{className:"alert alert-danger invalid-feedback",children:null===(n=w.external)||void 0===n?void 0:n.message})]}),(0,r.jsxs)("div",{className:"form-outline form-white mb-4",children:[(0,r.jsx)("label",{className:"form-label",children:"Imagen(es)"}),(0,r.jsx)("input",{type:"file",onChange:e=>{k("files",e.target.files)},multiple:!0,className:"form-control"})]}),(0,r.jsxs)("div",{className:"d-flex gap-4",children:[(0,r.jsx)("button",{type:"submit",className:"btn btn-outline-dark btn-lg px-5",id:"boton-nuevo-auto",children:"Agregar"}),(0,r.jsx)(d(),{href:"/autos/disponibles",children:(0,r.jsx)("button",{className:"btn btn-outline-dark btn-lg px-5",children:"Cancelar"})})]})]})})]})}},5944:function(e,n,t){"use strict";var r=t(5003),a=t.n(r);n.Z=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";return a()(n,e,t,{button:"ACEPTAR",closeOnEsc:!0,closeOnClickOutside:!0,timer:3e3})}},6468:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(7437),a=t(3369);t(1396);var s=t(5944),i=t(4033),o=t(2580),c=t(7380),l=t(8776);function u(){let e=(0,i.useRouter)(),n=async()=>{await (0,a.jH)(),(0,s.Z)("Adi\xf3s!","Hasta la pr\xf3xima"),e.push("/"),e.refresh()};return(0,r.jsx)(o.Z,{bg:"dark",expand:"lg",variant:"dark",children:(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)(o.Z.Toggle,{"aria-controls":"navbarSupportedContent"}),(0,r.jsx)(o.Z.Collapse,{id:"navbarSupportedContent",children:(0,r.jsxs)(c.Z,{className:"me-auto",children:[(0,r.jsx)(c.Z.Link,{onClick:n,children:"Cerrar Sesi\xf3n"}),(0,r.jsxs)(l.Z,{title:"Ventas",id:"basic-nav-dropdown",children:[(0,r.jsx)(l.Z.Item,{href:"/ventas",children:"Ventas"}),(0,r.jsx)(l.Z.Item,{href:"/ventas/propias",children:"Mis Ventas"})]}),(0,r.jsxs)(l.Z,{title:"Autos",id:"basic-nav-dropdown",children:[(0,r.jsx)(l.Z.Item,{href:"/autos",children:"Autos"}),(0,r.jsx)(l.Z.Item,{href:"/autos/vendidos",children:"Autos Vendidos"}),(0,r.jsx)(l.Z.Item,{href:"/autos/disponibles",children:"Autos Disponibles"})]}),(0,r.jsx)(c.Z.Link,{href:"/compradores",children:"Compradores"})]})})]})})}},4174:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(7437),a=t(3369);t(1396);var s=t(5944),i=t(4033),o=t(2580),c=t(7380),l=t(8776);function u(){let e=(0,i.useRouter)(),n=async()=>{await (0,a.jH)(),(0,s.Z)("Adi\xf3s!","Hasta la pr\xf3xima"),e.push("/"),e.refresh()};return(0,r.jsx)(o.Z,{bg:"dark",expand:"lg",variant:"dark",children:(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)(o.Z.Toggle,{"aria-controls":"navbarSupportedContent"}),(0,r.jsx)(o.Z.Collapse,{id:"navbarSupportedContent",children:(0,r.jsxs)(c.Z,{className:"me-auto",children:[(0,r.jsx)(c.Z.Link,{onClick:n,children:"Cerrar Sesi\xf3n"}),(0,r.jsxs)(l.Z,{title:"Ventas",id:"basic-nav-dropdown",children:[(0,r.jsx)(l.Z.Item,{href:"/ventas",children:"Ventas"}),(0,r.jsx)(l.Z.Item,{href:"/ventas/propias",children:"Mis Ventas"})]}),(0,r.jsx)(c.Z.Link,{href:"/compradores",children:"Compradores"})]})})]})})}},8170:function(e,n,t){"use strict";t.d(n,{Lw:function(){return l},MX:function(){return i},ZH:function(){return s},lf:function(){return o},m3:function(){return a},xC:function(){return c}});let r="https://back-end-autos.onrender.com/api/";async function a(e,n){let t=[];t={"Content-Type":"application/json"};let a=await fetch(r+e,{method:"POST",headers:t,body:JSON.stringify(n)});return await a.json()}async function s(e,n){let t=await fetch(r+e,{method:"GET",headers:{"Content-type":"application/json",token:n},cache:"no-store"});return await t.json()}async function i(e,n,t){let a=await fetch(r+e+t,{method:"GET",headers:{"Content-type":"application/json",token:n},cache:"no-store"});return await a.json()}async function o(e,n,t){let a=await fetch(r+e,{method:"POST",headers:{"Content-type":"application/json",token:t},body:JSON.stringify(n)});return await a.json()}async function c(e,n,t){let a=await fetch(r+e,{method:"POST",headers:{token:t},body:n});return await a.json()}async function l(e,n,t){let a=await fetch(r+e,{method:"PATCH",headers:{"Content-type":"application/json",token:t},body:JSON.stringify(n)});return await a.json()}},3369:function(e,n,t){"use strict";t.d(n,{Fr:function(){return s},LP:function(){return i},U2:function(){return a},a1:function(){return r},fK:function(){return o},jH:function(){return c},pR:function(){return l}});let r=(e,n)=>{sessionStorage.setItem(e,n)},a=e=>sessionStorage.getItem(e),s=e=>{sessionStorage.setItem("token",e)},i=()=>sessionStorage.getItem("token"),o=()=>sessionStorage.getItem("external_id"),c=()=>{sessionStorage.clear()},l=()=>{var e=sessionStorage.getItem("token");return e&&("undefined"!==e||null!==e||"null"!==e)}},9701:function(e,n,t){"use strict";t.d(n,{X:function(){return l}});var r=t(1865),a=function(e,n,t){if(e&&"reportValidity"in e){var a=(0,r.U2)(t,n);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},s=function(e,n){var t=function(t){var r=n.fields[t];r&&r.ref&&"reportValidity"in r.ref?a(r.ref,t,e):r.refs&&r.refs.forEach(function(n){return a(n,t,e)})};for(var r in n.fields)t(r)},i=function(e,n){n.shouldUseNativeValidation&&s(e,n);var t={};for(var a in e){var i=(0,r.U2)(n.fields,a),l=Object.assign(e[a]||{},{ref:i&&i.ref});if(c(n.names||Object.keys(e),a)){var u=Object.assign({},o((0,r.U2)(t,a)));(0,r.t8)(u,"root",l),(0,r.t8)(t,a,u)}else(0,r.t8)(t,a,l)}return t},o=function(e){return Array.isArray(e)?e.filter(Boolean):[]},c=function(e,n){return e.some(function(e){return e.startsWith(n+".")})};function l(e,n,t){return void 0===n&&(n={}),void 0===t&&(t={}),function(a,o,c){try{return Promise.resolve(function(r,i){try{var l=(n.context,Promise.resolve(e["sync"===t.mode?"validateSync":"validate"](a,Object.assign({abortEarly:!1},n,{context:o}))).then(function(e){return c.shouldUseNativeValidation&&s({},c),{values:t.raw?a:e,errors:{}}}))}catch(e){return i(e)}return l&&l.then?l.then(void 0,i):l}(0,function(e){var n;if(!e.inner)throw e;return{values:{},errors:i((n=!c.shouldUseNativeValidation&&"all"===c.criteriaMode,(e.inner||[]).reduce(function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var a=e[t.path].types,s=a&&a[t.type];e[t.path]=(0,r.KN)(t.path,n,e,t.type,s?[].concat(s,t.message):t.message)}return e},{})),c)}}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[595,664,729,971,938,744],function(){return e(e.s=8220)}),_N_E=e.O()}]);